{"code":"!function(t){var e={};function s(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=e,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},s.r=function(t){Object.defineProperty(t,\"__esModule\",{value:!0})},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,\"a\",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p=\"\",s(s.s=0)}([function(t,e,s){\"use strict\";s.r(e);class n{constructor(t,e,s){this.x=t,this.y=e,this.z=s}_plus(t){return new n(this.x+t.x,this.y+t.y,this.z+t.z)}_minus(t){return new n(this.x-t.x,this.y-t.y,this.z-t.z)}_dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}_scale(t){return new n(t*this.x,t*this.y,t*this.z)}_linearInterpolation(t,e){return this._scale(1-e)._plus(t._scale(e))}asColor(){return new a(this.x,this.y,this.z)}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}}var i=n;class r{constructor(t,e,s){this.r=t,this.g=e,this.b=s}asVector3(){return new i(this.r,this.g,this.b)}rescale(t=0,e=255,s=0,n=255,i=0,a=255){let h=e-t,o=n-s,c=a-i,l=parseInt((this.r-t)/h*255),u=parseInt((this.g-s)/o*255),x=parseInt((this.b-i)/c*255);return new r(l,u,x)}normalized(){return this.rescale(0,1,0,1,0,1)}}var a=r;var h=class{constructor(){}colorAtIntersection(t){return new a(0,0,0)}};var o=class{constructor(t=-2,e=2,s=-1,n=-1,i=0,r=5){this.xmin=t,this.xmax=e,this.ymin=s,this.ymax=n,this.zmin=i,this.zmax=r,this.objects=[],this.backgroundColor=new a(0,0,0)}getObjects(){return this.objects}generateRandomSpheres(t=5){for(var e=0;e<t;++e){let t=new i(Math.random()*(this.xmax-this.xmin)+this.xmin,Math.random()*(this.ymax-this.ymin)+this.ymin,Math.random()*(this.zmax-this.zmin)+this.zmin),e=.9*Math.random()+.1,s=Math.random(),n=Math.random(),r=Math.random(),a=new h(t,e,s,n,r);this.objects.push(a)}}};var c=class{constructor(t,e){this.w=t,this.h=e,this.canvas=this._createCanvas()}_createCanvas(){const t=document.createElement(\"canvas\");t.setAttribute(\"width\",this.w),t.setAttribute(\"height\",this.h);const e=t.getContext(\"2d\"),s=e.getImageData(0,0,this.w,this.h);return{canvas:t,context:e,imageData:s,pixels:s.data}}putPixel(t,e,s){const n=4*(e*this.w+t);this.canvas.pixels[n]=0|s.r,this.canvas.pixels[n+1]=0|s.g,this.canvas.pixels[n+2]=0|s.b,this.canvas.pixels[n+3]=255}renderInto(t){this.canvas.context.putImageData(this.canvas.imageData,0,0),t.appendChild(this.canvas.canvas)}};var l=class{constructor(t,e,s,n){this.x1=t,this.x2=e,this.x3=s,this.x4=n}};var u=class{constructor(t,e){this.origin=t,this.direction=e}};class x{constructor(t,e,s,n){this.camera=t,this.imagePlane=e,this.H=n,this.W=s}static createDefaultView(){const t=new l(new i(-1,.75,0),new i(1,.75,0),new i(-1,-.75,0),new i(1,-.75,0)),e=new i(0,0,-1);return new x(e,t,256,192)}_bilinearInterpolation(t,e){let s=t/this.W,n=(this.H-e-1)/this.H,i=this.imagePlane.x1._linearInterpolation(this.imagePlane.x2,s),r=this.imagePlane.x3._linearInterpolation(this.imagePlane.x4,s)._linearInterpolation(i,n);return{point:r,ray:new u(r,r._minus(this.camera))}}colorSnapshot(){const t=new c(this.W,this.H);for(let e=0;e<this.H;e++)for(let s=0;s<this.W;s++){let n=this._bilinearInterpolation(s,e);t.putPixel(s,e,n.ray.direction.asColor().rescale(-1,1,-.75,.75))}return console.log(.5,.5,.5,.5),t}viewScene(t){const e=new c(this.W,this.H);for(let s=0;s<this.H;s++)for(let n=0;n<this.W;n++){let i=this._bilinearInterpolation(n,s),r=t.backgroundColor,a=t.getObjects(),h=null,o=null;for(let t=0;t<a.length;++t){let e=a[t],s=e.intersection(i.ray);null!==s&&(null===h?(h=s,o=e):s<h&&(h=s,o=e))}null!==o&&(r=o.color),e.putPixel(n,s,r)}return e}}var m=x;(function(){const t=m.createDefaultView();let e=new o;e.generateRandomSpheres(),t.viewScene(e).renderInto(document.querySelector(\"body\"))})()}]);","extractedComments":[]}